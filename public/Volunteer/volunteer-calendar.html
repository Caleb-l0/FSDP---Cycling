<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HappyVolunteering | Calendar</title>
  <link rel="stylesheet" href="../homepage.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="./volunteer-calendar.css" />
</head>
<body>

<header class="hv-header">
    <div class="container hv-header-content">
        <div class="hv-logo">
            <a href="./homepage_login_volunteer.html" style="text-decoration: none; color: inherit;">
                Happy Volunteer
            </a>
        </div>

        <nav id="mainNav">
            <ul>
                <li><a href="./volunteer-events.html">Booking</a></li>
                <li><a href="./volunteer_community_page.html">Community</a></li>
                <li><a href="./volunteer_rewards.html">Reward</a></li>
                <li><a href="./Volunteer_friend.html">Friends</a></li>
                <li><a href="./notification.html" class="noti-nav-link">Notification<span class="noti-nav-badge" id="notiBadge" style="display:none;"></span></a></li>
                <li><a href="../Profile/profilepage.html">Profile</a></li>
            </ul>
        </nav>

        <button class="hv-nav-toggle" id="hvNavToggle">
            <i class="fas fa-bars"></i>
        </button>

        <!-- RIGHT SIDE -->
        <div class="hv-header-right">

            <!-- Language -->
            <div class="hv-lang-dropdown">
                <button id="langButton">Language</button>
                <div class="hv-lang-dropdown-content">
                    <button onclick="changeLanguage('en')">English</button>
                    <button onclick="changeLanguage('zh')">Chinese</button>
                    <button onclick="changeLanguage('ms')">Malay</button>
                    <button onclick="changeLanguage('ta')">Tamil</button>
                </div>
            </div>

            <!-- Logged In Badge -->
            <div class="hv-user-status" id="userStatus">
                Logged in as Guest
            </div>

        </div>

        <nav class="hv-nav" id="hvNav">
            <ul>
                <li><a href="./volunteer-events.html">Booking</a></li>
                <li><a href="./volunteer_community_page.html">Community</a></li>
                <li><a href="./volunteer_rewards.html">Reward</a></li>
                <li><a href="./Volunteer_friend.html">Friends</a></li>
                <li><a href="./notification.html" class="noti-nav-link">Notification<span class="noti-nav-badge" id="notiBadgeMobile" style="display:none;"></span></a></li>
                <li><a href="../Profile/profilepage.html">Profile</a></li>
            </ul>
        </nav>
    </div>
</header>

<div class="container">
  <div class="calendar-header">
    <div class="calendar-header-nav">
      <button type="button" class="calendar-nav-btn" id="calendar-prev-month" title="Previous month" aria-label="Previous month"><i class="fas fa-chevron-left"></i></button>
      <h2 id="calendar-title">Calendar</h2>
      <button type="button" class="calendar-nav-btn" id="calendar-next-month" title="Next month" aria-label="Next month"><i class="fas fa-chevron-right"></i></button>
    </div>
    <button class="back-btn" onclick="window.location.href='volunteer-events.html'">
      <i class="fas fa-arrow-left"></i> Back to Events
    </button>
  </div>

<!-- Weather By Current Location -->
<section class="features">
    <div class="section-title">
        <h2>Weather At Your Location</h2>
    </div>

    <div class="container">
        <div class="service-card">
            <div id="geo-weather">Detecting your location...</div>
        </div>
    </div>
</section>

  <div id="calendar-container" class="calendar-container">
    <div class="calendar-loading">Loading calendar...</div>
  </div>
</div>

<footer>
    <div class="container">
        <div class="footer-content">
            <div class="footer-column">
                <h3>Happy Volunteer</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Our Team</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">News & Updates</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3>Information</h3>
                <ul>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Resources</a></li>
                    <li><a href="#">Event Calendar</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3>Contact</h3>
                <ul>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">Support Center</a></li>
                    <li><a href="#">Partnerships</a></li>
                    <li><a href="#">Feedback</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3>Legal</h3>
                <ul>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Use</a></li>
                    <li><a href="#">Cookie Policy</a></li>
                    <li><a href="#">Disclaimer</a></li>
                </ul>
            </div>
        </div>

        <div class="copyright">
            <p>&copy; 2025 Happy Volunteer. All rights reserved.</p>
        </div>
    </div>
</footer>

<script src="volunteer-calendar.js"></script>
<script src="../Translation.js"></script>
<script src="../homepage.js"></script>

<script>
// Check for new event notifications and show badge
(async function checkNotiBadge() {
  const LAST_SEEN_KEY = 'hv_last_seen_eventid';
  const badge = document.getElementById('notiBadge');
  const badgeMobile = document.getElementById('notiBadgeMobile');
  
  try {
    const res = await fetch('https://fsdp-cycling-ltey.onrender.com/volunteer/events');
    if (!res.ok) return;
    const events = await res.json();
    
    const ids = (events || [])
      .map(e => Number(e.eventid ?? e.EventID ?? e.id))
      .filter(n => Number.isFinite(n));
    if (ids.length === 0) return;
    
    const latestId = Math.max(...ids);
    let lastSeen = Number(localStorage.getItem(LAST_SEEN_KEY));
    
    if (!Number.isFinite(lastSeen) || lastSeen <= 0) {
      localStorage.setItem(LAST_SEEN_KEY, String(latestId));
      return;
    }
    
    if (latestId > lastSeen) {
      if (badge) badge.style.display = 'inline-block';
      if (badgeMobile) badgeMobile.style.display = 'inline-block';
    }
  } catch (e) {
    console.error('[NotiBadge]', e);
  }
})();
</script>

 <script src="https://cdn.botpress.cloud/webchat/v3.5/inject.js"></script>
<script src="https://files.bpcontent.cloud/2025/11/22/14/20251122142820-IG7UQ29V.js" defer></script>
</body>
</html>

